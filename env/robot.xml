<mujoco model="robot">
  <compiler angle="radian" meshdir="meshes"/>

  <option gravity="0 0 -9.81" integrator="implicitfast" cone="elliptic" impratio="100" />

  <!-- ================= ASSETS ================= -->
  <asset>
    <mesh name="base_link" file="base_link.stl"/>
    <mesh name="link1" file="link_1.stl"/>
    <mesh name="link2" file="link_2.stl"/>
    <mesh name="link3" file="link_3.stl"/>
    <mesh name="link4" file="link_4.stl"/>
    <mesh name="link5" file="link_5.stl"/>
    <mesh name="gripper_base" file="gripper_base_link.stl"/>
    <mesh name="gripper_left" file="gripper_link_left.stl"/>
    <mesh name="gripper_right" file="gripper_link_right.stl"/>
    <mesh name="camera" file="camera.stl"/>
    <mesh name="axis_x" file="axis_x.stl"/>
    <mesh name="axis_y" file="axis_y.stl"/>
    <mesh name="axis_z" file="axis_z.stl"/>
    <texture name="grid"
             type="2d"
             builtin="checker"
             width="512"
             height="512"
             rgb1="0.2 0.3 0.4"
             rgb2="0.1 0.2 0.3"/>
    
    <material name="grid_mat"
              texture="grid"
              texrepeat="10 10"
              reflectance="0.1"/>

    <texture name="sky"
             type="skybox"
             builtin="gradient"
             rgb1="0.9 0.9 0.9"
             rgb2="0.6 0.6 0.6"
             width="512"
             height="512"/>
  </asset>

  <!-- ================= WORLD ================= -->
  <worldbody>

    <!-- Lighting -->
    <light name="sun"
           directional="true"
           pos="0 0 5"
           dir="0 0 -1"
           diffuse="1 1 1"
           specular="0.5 0.5 0.5"/>

    <light directional="true"
           pos="0 0 3"
           dir="0 0 -1"/>

    <!-- Ground plane -->
    <geom name="ground"
          type="plane"
          size="10 10 0.1"
          pos="0 0 0"
          material="grid_mat"
          contype="3"
          conaffinity="1"/>
      
    <body name="goal_marker" mocap="true">
        <geom type="box"
              size="0.02 0.02 0.02"
              rgba="0 1 0 1"
              contype="0"
              conaffinity="0"/>
    </body>

    <!-- Base -->
    <body name="base_link" pos="0 0 0">
      <inertial pos="0 0.031146 0" mass="1.7941" fullinertia="0.0048349 0.0083635 0.0048349 0 0 0"/>
      <geom type="mesh" mesh="base_link" rgba="0.2 0.2 0.9 1" contype="1" conaffinity="0"/>

      <!-- Joint 1 -->
      <body name="link1" pos="0 0 0.0592"> 
        <joint name="joint1" type="hinge" axis="0 0 1" limited="true" range="-2.09 2.09"/>
        <inertial pos="-0.00038036 0 0.03050633" mass="0.23683291" fullinertia="0.00039491 0.00077141 0.00059233 0 -0.00000445 0"/>
        <geom type="mesh" mesh="link1" rgba="0.2 0.2 0.2 1" contype="1" conaffinity="0"/>

        <!-- Joint 2 -->
        <body name="link2" pos="0 0 0.0508">
          <joint name="joint2" type="hinge" axis="1 0 0" limited="true" range="-1.57 1.57"/>
          <inertial pos="0.00053811 0 0.08784697" mass="0.26340123" fullinertia="0.00247044 0.00296718 0.00054702 0 0.00001113 1e-8"/>
          <geom type="mesh" mesh="link2" rgba="0.2 0.2 0.2 1" contype="1" conaffinity="0"/>

          <!-- Joint 3 -->
          <body name="link3" pos="0 0 0.125">
            <joint name="joint3" type="hinge" axis="1 0 0" limited="true" range="-1.57 1.57"/>
            <inertial pos="-0.00027016 -0.00023131 0.07622061" mass="0.16450681" fullinertia="0.0012914 0.00138544 0.00015324 -0.00000012 0.00000065 -0.00000492"/>
            <geom type="mesh" mesh="link3" rgba="0.2 0.2 0.2 1" contype="1" conaffinity="0"/>

            <!-- Joint 4 -->
            <body name="link4" pos="0 0 0.125">
              <joint name="joint4" type="hinge" axis="1 0 0" limited="true" range="-1.57 1.57"/>
              <inertial pos="0 0.00932713 0.05303399" mass="0.10867011" fullinertia="0.0004057 0.00037552 0.0000441 0 0 0.00006314"/>
              <geom type="mesh" mesh="link4" rgba="0.3 0.3 0.3 1" contype="1" conaffinity="0"/>

              <!-- Joint 5 -->
              <body name="link5" pos="0 0 0.065">
                <joint name="joint5" type="hinge" axis="0 0 1" limited="true" range="-1.57 1.57"/>
                <inertial pos="-0.00039819 -0.00306049 0.04570833" mass="0.11311685" fullinertia="0.00034785 0.00035044 0.00003925 0 -0.00000314 -0.00000105"/>
                <geom type="mesh" mesh="link5" rgba="0.3 0.3 0.3 1" contype="1" conaffinity="0"/>

                <!-- Joint 6 -->
                <body name="gripper_base_link" pos="0 0 0.07">
                  <joint name="joint6" type="hinge" axis="1 0 0" limited="true" range="-1.57 1.57"/>
                  <inertial pos="-0.00013639 -0.00931502 0.06177552" mass="0.18022257" fullinertia="0.00087332 0.00090601 0.00018951 -0.00000005 0.00000177 -0.00010752"/>
                  <geom type="mesh" mesh="gripper_base" rgba="1 1 1 1" contype="5" conaffinity="1"/>

                  <!-- Left finger -->
                  <body name="gripper_left_finger" pos="0 -0.00758 0.111">
                    <joint name="gripper_left_finger_joint" type="slide" axis="1 0 0" limited="true" range="0.0 0.039"/>
                    <geom type="mesh" mesh="gripper_left" rgba="1 0 0 1" contype="2" conaffinity="1"/>
                  </body>

                  <!-- Right finger -->
                  <body name="gripper_right_finger" pos="0 -0.00758 0.111">
                    <joint name="gripper_right_finger_joint" type="slide" axis="1 0 0" limited="true" range="-0.039 0.0"/>
                    <geom type="mesh" mesh="gripper_right" rgba="1 0 0 1" contype="2" conaffinity="1"/>
                  </body>

                  <!-- Camera -->
                  <body name="camera" pos="0 -0.07367 0.07055">
                    <geom type="mesh" mesh="camera" rgba="1 1 1 1" contype="3" conaffinity="0"/>
                    <camera name="hand_cam" mode="fixed" fovy="45" pos="0 0 0" euler="0 0 0"> </camera>
                  </body>

                  <!-- EE reference -->
                  <body name="ee_ref_link" pos="0 -0.00758 0.155">
                    <geom type="sphere" size="0.01" rgba="0.1 0.1 0.1 1" contype="2" conaffinity="0"/>
                    <site name="ee_site" pos="0 0 0" size="0.005" rgba="1 0 1 1"/>
                    <body name="ee_axis_x">
                      <geom type="mesh" mesh="axis_x" rgba="1 0 0 1" contype="2" conaffinity="0"/>
                    </body>
                    <body name="ee_axis_y">
                      <geom type="mesh" mesh="axis_y" rgba="0 1 0 1" contype="2" conaffinity="0"/>
                    </body>
                    <body name="ee_axis_z">
                      <geom type="mesh" mesh="axis_z" rgba="0 0 1 1" contype="2" conaffinity="0"/>
                    </body>
                  </body>

                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>

  </worldbody>
  
  <!-- ================= Gripper actuator ================= -->
  <actuator>
    <position name="joint1" joint="joint1" ctrlrange="-2.09 2.09" kp="500.0" kv="0.1" forcerange="-9 9"/>
    <position name="joint2" joint="joint2" ctrlrange="-1.57 1.57" kp="500.0" kv="0.1" forcerange="-9 9"/>
    <position name="joint3" joint="joint3" ctrlrange="-1.57 1.57" kp="500.0" kv="0.1" forcerange="-9 9"/>
    <position name="joint4" joint="joint4" ctrlrange="-1.57 1.57" kp="500.0" kv="0.1" forcerange="-9 9"/>
    <position name="joint5" joint="joint5" ctrlrange="-1.57 1.57" kp="500.0" kv="0.1" forcerange="-9 9"/>
    <position name="joint6" joint="joint6" ctrlrange="-1.57 1.57" kp="500.0" kv="0.1" forcerange="-9 9"/>
    <position name="gripper_left_finger_joint" joint="gripper_left_finger_joint" ctrlrange="0.0 0.039" kp="500.0" kv="0.1" forcerange="-9 9"/>
    <position name="gripper_right_finger_joint" joint="gripper_right_finger_joint" ctrlrange="-0.039 0.0" kp="500.0" kv="0.1" forcerange="-9 9"/>
  </actuator>

  <keyframe>
    <key name="home" qpos="0 0.57 -0.73 -1.24 0 -0.77 0.0 0.0"/>
  </keyframe>

</mujoco>
